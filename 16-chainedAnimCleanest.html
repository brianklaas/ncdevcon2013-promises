<html>
<head>
	<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
</head>
<body>
	<div id="divToFadeOut">
		<p>I will fade out, then in, then out again.</p>
	</div>

	<script>
		var fadeIn = function (el) {
			console.log("Inside fadeIn");
			var promise = $(el).animate({
				opacity: 1
			}, 1500);
			// The promise will be resolved when the animation completes.
			return promise.promise();
		};

		var fadeOut = function(el) {
			console.log("Inside fadeOut");
			var promise = $(el).animate({
				opacity: 0
			}, 1500);
			// The promise will be resolved when the animation completes.
			return promise.promise();
		};

		var kickoff, outOne, inOne, outTwo;

		kickoff = $.Deferred();

		outOne = kickoff.then(function () {
			console.log("Fading Out");
			// remember that wait returns a promise
			return fadeOut('#divToFadeOut');
		});

		inOne = outOne.then(function () {
			console.log("Fading in");
			return fadeIn('#divToFadeOut');
		});

		outTwo = inOne.then(function () {
			console.log("Fading out again");
			return fadeOut('#divToFadeOut');
		});

		kickoff.resolve();
	</script>
</body>
</html>